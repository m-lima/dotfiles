#compdef fd

setopt localoptions nonomatch

local lines list disp

lines=($(cat ~/.config/fd/config))
list=( $lines )
disp=( -ld lines )

integer i
for (( i = 1; i <= $#list; i++ ))
do
  list[$i]=$(echo $lines[$i] | cut -d : -f 1)
  lines[$i]="$(echo $lines[$i] | cut -d : -f 1) : $(echo $lines[$i] | cut -d : -f 2)"
done

compadd "$disp[@]" -Q -a list
